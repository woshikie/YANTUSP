(function(e){function t(t){for(var r,a,o=t[0],l=t[1],c=t[2],d=0,f=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/YANTUSP/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},2468:function(e,t,n){"use strict";var r=n("ba32"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"","clipped-left":""}},[n("v-toolbar-title",[e._v("Yet Another NTU Stars Planner for "+e._s(e.academicYear)+" "+e._s(e.academicSemester)+" ")])],1),n("v-main",[n("v-container",{attrs:{fluid:""}},[n("v-row",{staticClass:" d-flex flex-row ",attrs:{align:"start",justify:"space-between"}},[n("v-col",{staticClass:"flex-shrink-1 flex-grow-0",attrs:{cols:"12",md:"3"}},[n("ModuleControls",{attrs:{"current-planned-mods":e.currentPlan,apiACADSEM:e.apiACADSEM},model:{value:e.selectedModules,callback:function(t){e.selectedModules=t},expression:"selectedModules"}})],1),n("v-col",{staticClass:"flex-grow-1 flex-shrink-0",attrs:{cols:"12",md:"9"}},[n("TimeTablePicker",{on:{change:e.onPlanChange},model:{value:e.selectedModules,callback:function(t){e.selectedModules=t},expression:"selectedModules"}})],1)],1)],1)],1),n("v-footer",{attrs:{app:""}},[n("span",{staticClass:"mr-4"},[e._v("Made with ♥ by Wai Gie; © 2020 - "+e._s(e.currDate.getFullYear())+";")]),n("v-btn",{staticClass:"mr-4",attrs:{color:"primary",rounded:"",href:"https://github.com/woshikie/YANTUSP"}},[e._v("Source")]),n("v-btn",{attrs:{color:"Accent",rounded:"",href:"https://www.buymeacoffee.com/kiethkok"}},[e._v("Buy me a ☕")])],1)],1)},s=[],a=(n("99af"),n("ac1f"),n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column align-start justify-start fill-height max-h-100 ml-2"},[n("div",{staticClass:"d-flex flex-row justify-center align-baseline w-100"},[n("v-text-field",{attrs:{clearable:!0,"clear-icon":e.icons.mdiClose,value:e.txtModule,label:"Enter Module Code here!"},on:{"click:clear":function(t){e.fetchModuleResult=[]},input:function(t){return e.txtModuleChange(t)}}})],1),n("div",{staticClass:"align-start d-flex flex-column overflow-auto max-w-100"},[e.hasResult?e._e():n("h2",[e._v(e._s(e.helperText))]),e._l(e.fetchModuleResult,(function(t,r){return n("v-btn",{key:"fetchModuleResult[]+"+r,staticClass:"text-wrap mt-1",on:{click:function(n){return e.onModuleAdd(t)}}},[n("v-icon",{staticClass:"mr-2"},[e._v(e._s(e.icons.mdiPlus))]),n("span",[e._v(e._s(t.code)+" "+e._s(t.name))])],1)}))],2),n("div",{staticClass:"d-flex justify-space-between flex-row w-100 mt-2"},[n("h3",[e._v("Selected Modules:")]),n("v-btn",{on:{click:e.onClearAllModule}},[e._v("Clear All")])],1),e.hasNoModulesSelected?n("h4",[e._v("No Modules Selected!")]):e._e(),n("div",{staticClass:"d-flex flex-column align-start overflow-auto max-w-100"},e._l(e.selectedModules,(function(t,r){return n("v-btn",{key:"selectedModules[]+"+r+t.code,staticClass:"mt-1",on:{click:function(n){return e.onModuleDelete(t.code)}}},[n("v-icon",{staticClass:"mr-2"},[e._v(e._s(e.icons.mdiMinus))]),n("span",[e._v(e._s(t.code)+" "+e._s(t.name))])],1)})),1),n("div",{staticClass:"w-100 mt-2"},[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",[e._v("Module Code")]),n("th",[e._v("Index")])])]),n("tbody",e._l(e.currentPlannedMods,(function(t,r){return n("tr",{key:e.uid+"-mini-table-"+r},[n("td",[e._v(e._s(t.code))]),n("td",[e._v(e._s(t.index))])])})),0)]},proxy:!0}])})],1)])}),o=[],l=(n("7db0"),n("b64b"),n("498a"),n("1157")),c=n.n(l),u=n("94ed"),d=(n("c975"),n("d4ec")),f=n("bee2"),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d["a"])(this,e),this.type="",this.group="",this.day="",this.time="",this.venue="",this.remarks="",this.remarkType=-1,Object.assign(this,t)}return Object(f["a"])(e,null,[{key:"parseRemarks",value:function(e){return-1!==e.indexOf("Teaching Wk1,3")?1:-1!==e.indexOf("Teaching Wk2,4")?2:0}},{key:"parseLessonTime",value:function(e){var t=e.split("-");if(2===t.length)return{start:parseInt(t[0]),end:parseInt(t[1])}}}]),e}(),p=h,v=(n("b0c0"),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d["a"])(this,e),this.code="",this.name="",this.AU=0,Object.assign(this,t)}),m=v,g={name:"ModuleControls",props:{currentPlannedMods:{type:Array,default:function(){return[]}},apiACADSEM:String},data:function(){return{icons:{mdiPlus:u["e"],mdiMinus:u["d"],mdiClose:u["c"]},txtModule:"",fetchModulePromise:null,fetchModuleResult:[],selectedModules:{}}},methods:{parseModName:function(e){var t=c()(e).find("b font");if(!(t.length<3))return{code:t[0].innerText.trim(),name:t[1].innerText.trim(),AU:parseFloat(t[2].innerText.trim().split(" ")[0])}},parseModIndexes:function(e){for(var t,n=c()(e).find("tr"),r={},i=0;i<n.length;i++){var s=c()(n[i]),a=c()(s).find("td");if(7===a.length){var o=this.parseModIndex(a[0]);void 0!==o&&(t=o);var l=new p({type:a[1].innerText,group:a[2].innerText,day:a[3].innerText,time:this.parseLessonTime(a[4].innerText),venue:a[5].innerText,remarks:a[6].innerText,remarkType:this.parseRemarks(a[6].innerText)});void 0!==t&&(void 0===r[t]&&(r[t]=[]),r[t].push(l))}}return r},parseModIndex:function(e){var t=c()(e).find("b");if(0!==t.length&&void 0!==t[0].innerText&&(void 0===t[0].innerText||0!==t[0].innerText.length))return t[0].innerText},parseRemarks:function(e){return p.parseRemarks(e)},parseLessonTime:function(e){return p.parseLessonTime(e)},getModules:function(){var e=this,t={STAFF_ACCESS:!1,ACADSEM:this.apiACADSEM,boption:"Search",r_search_type:"F",r_subj_code:this.txtModule},n="https://cors-anywhere.herokuapp.com/",r=n+"https://wish.wis.ntu.edu.sg/webexe/owa/AUS_SCHEDULE.main_display1";null!=this.fetchModulePromise&&(this.fetchModulePromise.abort(),this.fetchModulePromise=null),this.fetchModuleResult=[],this.fetchModulePromise=c.a.ajax({method:"POST",url:r,data:t}),this.fetchModulePromise.then((function(t){for(var n=c()(t),r=c()(n).find("table"),i=[],s=0;s<r.length;s+=2){var a=new m(e.parseModName(c()(r[s])));a.indexes=e.parseModIndexes(c()(r[s+1])),i.push(a)}e.fetchModuleResult=i})),this.fetchModulePromise.catch((function(){})),this.fetchModulePromise.always((function(){e.fetchModulePromise=null}))},txtModuleChange:function(e){this.txtModule=null==e?"":e,this.txtModule.length>0?this.getModules():this.fetchModuleResult=[]},onModuleAdd:function(e){void 0===this.selectedModules[e.code]&&(r["a"].set(this.selectedModules,e.code,e),this.$emit("onAdd",e),this.$emit("input",this.selectedModules),this.$emit("change",this.selectedModules))},onModuleDelete:function(e){void 0!==this.selectedModules[e]&&(r["a"].delete(this.selectedModules,e),this.$emit("onDelete",this.selectedModules[e]),this.$emit("input",this.selectedModules),this.$emit("change",this.selectedModules))},onClearAllModule:function(){this.selectedModules={},this.$emit("onClear"),this.$emit("input",this.selectedModules),this.$emit("change",this.selectedModules)}},computed:{hasResult:function(){return this.fetchModuleResult.length>0},helperText:function(){return 0===this.txtModule.length?this.hasNoModulesSelected?"Start by entering a course code!":"Enter course code to continue!":null===this.fetchModulePromise?"No Modules found!":"Searching NTU database... Please wait"},hasNoModulesSelected:function(){return 0===Object.keys(this.selectedModules).length},uid:function(){return this._uid}}},b=g,M=(n("2468"),n("2877")),x=n("6544"),y=n.n(x),w=n("8336"),_=n("132d"),S=n("1f4f"),T=n("8654"),C=Object(M["a"])(b,a,o,!1,null,"4cefa56e",null),k=C.exports;y()(C,{VBtn:w["a"],VIcon:_["a"],VSimpleTable:S["a"],VTextField:T["a"]});var P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"d-flex align-center flex-column fill-height",attrs:{fluid:""}},[n("v-row",{staticClass:"d-flex justify-space-around align-center col-12",attrs:{"no-gutters":""}},[n("v-btn",{attrs:{disabled:e.isLeftBtnDisabled},on:{click:function(t){e.planIndex--}}},[n("v-icon",[e._v(e._s(e.icons.mdiArrowLeft))])],1),n("h1",[e._v("Plan "+e._s(e.selectedIndex)+" out of "+e._s(e.plans.length))]),n("v-btn",{attrs:{disabled:e.isRightBtnDisabled},on:{click:function(t){e.planIndex++}}},[n("v-icon",[e._v(e._s(e.icons.mdiArrowRight))])],1)],1),n("TimeTableViewer",{staticClass:"flex d-flex",attrs:{value:e.selectedPlan}})],1)},A=[],O=n("2909"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-simple-table",{staticClass:"flex text-center",attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",e._l(7,(function(t){return n("th",{key:"ttv-header-"+t,staticClass:"text-center"},[e._v(e._s(e.getHeaders(t)))])})),0)]),n("tbody",e._l(30,(function(t){return n("tr",{key:"ttv-row-"+t},e._l(e.getCols(t),(function(r,i){return n("td",{key:"ttv-row"+t+"-col-"+i,attrs:{rowspan:r.rowSpan}},e._l(r.content,(function(r,s){return n("p",{key:"ttv-row"+t+"-col-"+i+"-content-"+s},[e._v(" "+e._s(r)+" ")])})),0)})),0)})),0)]},proxy:!0}])})],1)},D=[],E=(n("d3b7"),n("25f0"),n("4d90"),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d["a"])(this,e),this.content=[],this.rowSpan=1,Object.assign(this,t)}),V=E,N={name:"TimeTableViewer",props:{value:{type:Array,default:function(){return[]}}},computed:{uid:function(){return this._uid},plan:function(){return this.value}},methods:{getCols:function(e){for(var t=[],n=1;n<=7;n++){var r=this.getContent(n,e);void 0!==r&&t.push(r)}return t},getContent:function(e,t){if(1===e)return new V({content:[this.getHours(t)]});var n,r=this.getModule(e,t);if(r.length>0){var i=[],s=1;for(var a in r){var o=r[a];if(o.isStart){var l="".concat(o.modCode,", ").concat(o.timeslot.type);switch(o.timeslot.remarkType){case 1:l+=", ODD WEEKS ONLY";break;case 2:l+=", EVEN WEEKS ONLY";break}i.push(l),s=o.colSpan,n=new V({content:i,rowSpan:s})}}}else n=new V;return n},getModule:function(e,t){var n=this.getHourStart(t),r=this.fixHour(n+30),i=this.toDay(e),s=[];for(var a in this.plan){var o=this.plan[a];for(var l in o.timings){var c=o.timings[l];c.day===i&&n>=c.time.start&&r<=c.time.end&&s.push({modCode:o.code,timeslot:c,isStart:n===c.time.start,colSpan:this.getColSpan(c.time.start,c.time.end)})}}return s},getColSpan:function(e,t){var n=t-e;return 2*Math.floor(n/100)+(n%100!==0?1:0)},getHeaders:function(e){switch(e){case 1:return"Time\\Day";case 2:return"Monday";case 3:return"Tuesday";case 4:return"Wednesday";case 5:return"Thursday";case 6:return"Friday";case 7:return"Saturday"}},getHours:function(e){var t=this.getHourStart(e),n=this.fixHour(t+30),r=t.toString().padStart(4,"0"),i=n.toString().padStart(4,"0");return"".concat(r," - ").concat(i)},getHourStart:function(e){var t=830,n=this.getHourOffset(e);return this.fixHour(t+n)},getHourOffset:function(e){var t=e-1,n=30*t;return 100*Math.floor(n/60)+n%60},fixHour:function(e){var t=e%100;return t>=60?this.fixHour(e-t+100+(t-60)):e},toDay:function(e){switch(e){case 2:return"MON";case 3:return"TUE";case 4:return"WED";case 5:return"THU";case 6:return"FRI";case 7:return"SAT"}}}},I=N,R=(n("d77b"),n("a523")),H=Object(M["a"])(I,j,D,!1,null,"62b8cb7b",null),Y=H.exports;y()(H,{VContainer:R["a"],VSimpleTable:S["a"]});var $={name:"TimeTablePicker",components:{TimeTableViewer:Y},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{planIndex:0,icons:{mdiArrowRight:u["b"],mdiArrowLeft:u["a"]},isGenerating:!1,plans:[]}},computed:{selectedModule:{get:function(){return this.value},set:function(e){this.value=e}},selectedPlan:function(){if(this.isGenerating)return[];var e=this.withData(this.plans[this.planIndex]);return this.bgGeneratePlans(),this.$emit("change",e),e},selectedIndex:function(){return void 0===this.plans||0===this.plans.length?0:this.planIndex+1},isLeftBtnDisabled:function(){return 0===this.planIndex},isRightBtnDisabled:function(){return this.planIndex+1>=this.plans.length}},methods:{bgGeneratePlans:function(){this.isGenerating=!0,this.planIndex=0,this.plans=this.generatePlans(this.selectedModule),this.isGenerating=!1},generatePlans:function(e){if(void 0!==e){var t=[];for(var n in e){var r=e[n],i=[];for(var s in r.indexes){var a={code:n,index:s};if(0===t.length)i.push([a]);else for(var o in t){var l=[].concat(Object(O["a"])(t[o]),[a]);i.push(l)}}t=this.filterClashes(i)}return t}},filterClashes:function(e){var t=[];for(var n in e){var r=this.hydratePlan(e[n]),i=!1;if(r.timings.length>1)for(var s=0;s<r.timings.length-1;s++){for(var a=s+1;a<r.timings.length;a++){var o=r.timings[s],l=r.timings[a];if(!(o.day!==l.day||o.time.start>=l.time.end||o.time.end<=l.time.start||0!==o.remarkType&&0!==l.remarkType&&o.remarkType!==l.remarkType)){i=!0;break}}if(i)break}i||t.push(e[n])}return t},hydratePlan:function(e){var t={};for(var n in t.reference=e,t.timings=[],e){var r=e[n].code,i=e[n].index,s=this.selectedModule[r].indexes[i];t.timings=t.timings.concat(s)}return t},withData:function(e){for(var t in e){var n=e[t].code,r=e[t].index,i=this.selectedModule[n].indexes[r];e[t].timings=i}return e}}},U=$,F=n("0fd9"),L=Object(M["a"])(U,P,A,!1,null,"24a151b3",null),B=L.exports;y()(L,{VBtn:w["a"],VContainer:R["a"],VIcon:_["a"],VRow:F["a"]});var G={components:{TimeTablePicker:B,ModuleControls:k},data:function(){return{selectedModules:void 0,currentPlan:void 0,currDate:new Date}},created:function(){this.$vuetify.theme.dark=!0},methods:{onPlanChange:function(e){this.currentPlan=e}},computed:{academicYear:function(){var e=this.currDate.getFullYear(),t=this.currDate.getMonth();return t>=5&&t<11?"".concat(e,"/").concat(e+1):"".concat(e-1,"/").concat(e)},academicSemester:function(){var e=this.currDate.getMonth();return e>=5&&e<11?"S1":"S2"},apiYear:function(){return this.academicYear.split("/")[0]},apiSemester:function(){return this.academicSemester[1]},apiACADSEM:function(){return"".concat(this.apiYear,";").concat(this.apiSemester)}},metaInfo:{title:"YANTUSP",meta:[{name:"description",description:"Yet Another NTU Stars Planner"},{property:"og:site_name",content:"Yet Another NTU Stars Planner"},{property:"og:type",content:"website"},{name:"robots",content:"index,follow"}]}},W=G,J=(n("034f"),n("7496")),K=n("40dc"),q=n("62ad"),z=n("553a"),Q=n("f6c4"),X=n("2a7f"),Z=Object(M["a"])(W,i,s,!1,null,null,null),ee=Z.exports;y()(Z,{VApp:J["a"],VAppBar:K["a"],VBtn:w["a"],VCol:q["a"],VContainer:R["a"],VFooter:z["a"],VMain:Q["a"],VRow:F["a"],VToolbarTitle:X["a"]});var te=n("9483");Object(te["a"])("".concat("/YANTUSP/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ne=n("f309");r["a"].use(ne["a"]);var re=new ne["a"]({}),ie=(n("d5e8"),n("58ca"));r["a"].config.productionTip=!1,r["a"].use(n("3003")),r["a"].use(ie["a"]),new r["a"]({icons:{iconfont:"mdiSvg"},vuetify:re,render:function(e){return e(ee)}}).$mount("#app")},"85ec":function(e,t,n){},ba32:function(e,t,n){},d77b:function(e,t,n){"use strict";var r=n("f501"),i=n.n(r);i.a},f501:function(e,t,n){}});
//# sourceMappingURL=app.2f2ee470.js.map